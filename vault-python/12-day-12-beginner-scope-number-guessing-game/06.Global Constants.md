

## Global Constants - Hằng số toàn cục

### Khi nào nên dùng Global Scope?

Mặc dù nên cẩn thận với biến toàn cục, nhưng **không phải lúc nào cũng nên tránh global scope**. Global scope rất hữu ích khi định nghĩa **constants** (hằng số).

**[[Global Constants]]** là các biến được định nghĩa một lần và không bao giờ thay đổi trong suốt chương trình. Chúng lưu trữ các giá trị cố định mà bạn cần sử dụng nhiều lần.

### Ví dụ Global Constants

```python
PI = 3.14159265359
TWITTER_URL = "https://twitter.com"
GOOGLE_URL = "https://google.com"
MAX_ATTEMPTS = 5
GAME_TITLE = "Number Guessing Game"

def calculate_circle_area(radius):
    return PI * radius ** 2

def open_social_media():
    print(f"Opening {TWITTER_URL}")
```

**Đặc điểm:**

- Giá trị không bao giờ thay đổi sau khi định nghĩa
- Được sử dụng ở nhiều nơi trong chương trình
- Dễ bảo trì: chỉ cần sửa ở một chỗ


### Naming Convention cho Constants

**Quy tắc đặt tên hằng số trong Python:**

- Viết **HOA toàn bộ** các chữ cái
- Phân cách các từ bằng **dấu gạch dưới** `_`
- Đặt tên có ý nghĩa, mô tả rõ mục đích

**Ví dụ đúng:**

```python
MAX_SPEED = 100
API_KEY = "abc123xyz"
DATABASE_URL = "localhost:5432"
WINNING_SCORE = 1000
```

**Ví dụ sai:**

```python
maxSpeed = 100  # ❌ Không viết hoa
Max_Speed = 100  # ❌ Không viết hoa toàn bộ
max_speed = 100  # ❌ Đây là biến thông thường
```


### Lợi ích của naming convention

**Nhận diện ngay lập tức:**

```python
PI = 3.14159
radius = 5

def calculate_area():
    area = PI * radius ** 2  # Thấy PI viết hoa → Biết đây là hằng số
    return area
```

**Nhắc nhở không sửa đổi:**

Khi thấy biến viết HOA, lập trình viên sẽ:

- Hiểu đây là giá trị không nên thay đổi
- Tránh vô tình sửa đổi
- Biết đây là giá trị được dùng chung


### So sánh Constants vs Variables

```python
# Constants - Không thay đổi
PI = 3.14159
MAX_PLAYERS = 4
GAME_TITLE = "Adventure Quest"

# Variables - Thay đổi trong quá trình chạy
player_health = 100
current_level = 1
score = 0

def play_game():
    print(GAME_TITLE)  # ✅ Đọc constant - OK
    global score
    score += 10  # ⚠️ Sửa đổi biến toàn cục - Nên tránh
```


### Best Practices

**Đặt constants ở đầu file:**

```python
# constants.py hoặc đầu file main
PI = 3.14159
MAX_ATTEMPTS = 10
API_URL = "https://api.example.com"

# Sau đó mới đến các hàm và logic
def main():
    print(f"You have {MAX_ATTEMPTS} attempts")
```

**Tổ chức constants theo nhóm:**

```python
# Game Settings
MAX_HEALTH = 100
MAX_MANA = 50
PLAYER_SPEED = 5

# URLs
API_URL = "https://api.game.com"
IMAGES_URL = "https://cdn.game.com/images"

# Colors
COLOR_RED = "#FF0000"
COLOR_BLUE = "#0000FF"
```

**Sử dụng trong functions:**

```python
WINNING_SCORE = 100

def check_win(current_score):
    return current_score >= WINNING_SCORE  # Đọc constant - an toàn

def display_goal():
    print(f"Reach {WINNING_SCORE} points to win!")  # OK
```


### Khi nào dùng Constants?

**Nên dùng cho:**

- Giá trị toán học: `PI`, `E`, `GOLDEN_RATIO`
- Cấu hình: `MAX_ATTEMPTS`, `TIMEOUT_SECONDS`
- URLs và paths: `API_URL`, `IMAGE_FOLDER`
- Game settings: `SCREEN_WIDTH`, `SCREEN_HEIGHT`
- Màu sắc: `COLOR_RED`, `BACKGROUND_COLOR`
- Thông điệp cố định: `WELCOME_MESSAGE`, `ERROR_MESSAGE`

**Không nên dùng cho:**

- Giá trị thay đổi theo thời gian
- Dữ liệu từ user input
- Kết quả tính toán động
- State của ứng dụng


### Ví dụ thực tế

```python
# Game Constants
SCREEN_WIDTH = 800
SCREEN_HEIGHT = 600
FPS = 60
PLAYER_SPEED = 5

# Math Constants
PI = 3.14159
GRAVITY = 9.8

# URLs
LOGO_IMAGE = "assets/logo.png"
BACKGROUND_MUSIC = "audio/theme.mp3"

def setup_game():
    screen = create_screen(SCREEN_WIDTH, SCREEN_HEIGHT)
    set_framerate(FPS)
    load_image(LOGO_IMAGE)
    play_music(BACKGROUND_MUSIC)
    return screen

def calculate_distance(time):
    return 0.5 * GRAVITY * time ** 2
```


### Tóm tắt

**Quy tắc sử dụng Global Scope:**

- ✅ Dùng cho constants - Viết HOA toàn bộ
- ✅ Đọc biến toàn cục trong functions - An toàn
- ❌ Sửa đổi biến toàn cục trong functions - Nên tránh

**Lợi ích của Constants:**

- Code dễ đọc và bảo trì
- Tránh "magic numbers" (số xuất hiện không rõ nguồn gốc)
- Dễ dàng thay đổi cấu hình tại một chỗ
- Giảm lỗi do nhầm lẫn giá trị

**Liên kết:** [[Global Constants]], [[Naming Conventions]], [[Python Style Guide]], [[PEP 8]], [[Global Scope]], [[Code Readability]], [[Best Practices]]

***

Bạn đã sẵn sàng làm quiz để kiểm tra kiến thức về Scope chưa?

