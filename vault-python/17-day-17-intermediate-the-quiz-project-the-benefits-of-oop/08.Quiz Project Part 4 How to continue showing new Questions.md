

## Quiz Game - Loop qua tất cả câu hỏi

### Vấn đề hiện tại

**Tình trạng:**
Chương trình chỉ hỏi 1 câu rồi dừng. Sau khi user nhập input, không có cách nào để tiếp tục sang câu hỏi tiếp theo.

**Mong muốn:**
Giống final version - sau khi trả lời câu 1, tự động chuyển sang câu 2, 3... cho đến hết.

**Output mong muốn:**

```
Q.1: A slug's blood is green. (True/False): True
Q.2: The loudest animal is... (True/False): False
Q.3: Approximately one quarter... (True/False): True
...
```


### Giải pháp - While Loop

**Ý tưởng:**
Tạo while loop kiểm tra còn câu hỏi không. Nếu còn → tiếp tục hỏi.

**Cấu trúc trong main.py:**

```python
while quiz.still_has_questions():
    quiz.next_question()
```

**Logic:**

- `still_has_questions()` = Method trả về True/False
- True → Vẫn còn câu hỏi → Tiếp tục loop
- False → Hết câu hỏi → Thoát loop


### Tạo method still_has_questions()

**Yêu cầu:**
Method phải return boolean để while loop sử dụng được.

**Phân tích:**

- `question_list` có tổng cộng 12 câu hỏi (length = 12)
- `question_number` bắt đầu từ 0, tăng dần sau mỗi câu
- Khi `question_number` = 12 → Đã hết câu hỏi

**Logic kiểm tra:**

```
question_number < len(question_list) → Còn câu hỏi (True)
question_number >= len(question_list) → Hết câu hỏi (False)
```


### Implementation - Phiên bản đầy đủ

**File: quiz_brain.py**

```python
class QuizBrain:
    
    def __init__(self, q_list):
        self.question_number = 0
        self.question_list = q_list
    
    def still_has_questions(self):
        if self.question_number < len(self.question_list):
            return True
        else:
            return False
    
    def next_question(self):
        current_question = self.question_list[self.question_number]
        self.question_number += 1
        input(f"Q.{self.question_number}: {current_question.text} (True/False): ")
```

**Giải thích method:**

```python
def still_has_questions(self):
    if self.question_number < len(self.question_list):
        return True
    else:
        return False
```

**Breakdown:**

- `len(self.question_list)` → Tổng số câu hỏi (12)
- `self.question_number` → Câu hỏi hiện tại (0, 1, 2...)
- So sánh: `0 < 12` → True, tiếp tục
- Khi: `12 < 12` → False, dừng lại


### Ví dụ hoạt động

**Iteration 1:**

```
question_number = 0
0 < 12 → True
→ Hiển thị Q.1, tăng question_number lên 1
```

**Iteration 2:**

```
question_number = 1
1 < 12 → True
→ Hiển thị Q.2, tăng question_number lên 2
```

**...**

**Iteration 12:**

```
question_number = 11
11 < 12 → True
→ Hiển thị Q.12, tăng question_number lên 12
```

**Check tiếp theo:**

```
question_number = 12
12 < 12 → False
→ Thoát loop, kết thúc quiz
```


### Code đơn giản hóa - Return expression trực tiếp

**Thay vì:**

```python
def still_has_questions(self):
    if self.question_number < len(self.question_list):
        return True
    else:
        return False
```

**Có thể viết:**

```python
def still_has_questions(self):
    return self.question_number < len(self.question_list)
```

**Tại sao hoạt động:**

**Ví dụ minh họa:**

```python
a = 5
b = 3

# Expression được evaluate
result = a > b  # 5 > 3 → True
print(result)   # True
```

**Tương tự:**

```python
return 5 > 3
# Tương đương với
return True
```

**Trong method:**

```python
return self.question_number < len(self.question_list)
# Python evaluate: 1 < 12 → True
# Return True trực tiếp
```

**Lợi ích:**

- Code ngắn gọn hơn
- Dễ đọc, rõ ràng
- Ít dòng code hơn
- Pythonic style


### Sử dụng trong main.py

**File: main.py**

```python
from question_model import Question
from data import question_data
from quiz_brain import QuizBrain

question_bank = []

for question in question_data:
    question_text = question["text"]
    question_answer = question["answer"]
    new_question = Question(question_text, question_answer)
    question_bank.append(new_question)

quiz = QuizBrain(question_bank)

while quiz.still_has_questions():
    quiz.next_question()
```

**Flow hoạt động:**

```
1. Tạo quiz object
2. Check: quiz.still_has_questions() → True
3. Gọi: quiz.next_question() → Hiển thị Q.1
4. Check lại: quiz.still_has_questions() → True
5. Gọi: quiz.next_question() → Hiển thị Q.2
...
6. Check: quiz.still_has_questions() → True
7. Gọi: quiz.next_question() → Hiển thị Q.12
8. Check: quiz.still_has_questions() → False
9. Thoát loop → Kết thúc chương trình
```


### So sánh question_number và length

**Mối quan hệ:**


| Thời điểm | question_number | len(question_list) | So sánh | Kết quả |
| :-- | :-- | :-- | :-- | :-- |
| Ban đầu | 0 | 12 | 0 < 12 | True (tiếp tục) |
| Sau câu 1 | 1 | 12 | 1 < 12 | True |
| Sau câu 6 | 6 | 12 | 6 < 12 | True |
| Sau câu 11 | 11 | 12 | 11 < 12 | True |
| Sau câu 12 | 12 | 12 | 12 < 12 | False (dừng) |

**Key insight:**
Khi `question_number` bằng `length`, nghĩa là đã hỏi hết tất cả câu (vì bắt đầu từ 0).

### Test chương trình

**Chạy main.py:**

```
Q.1: A slug's blood is green. (True/False): True
Q.2: The loudest animal is the African Elephant. (True/False): False
Q.3: Approximately one quarter of human bones are in the feet. (True/False): True
...
Q.12: [Last question] (True/False): True
[Program ends]
```

**Quan sát:**

- Loop tự động chạy qua tất cả 12 câu hỏi
- Không cần can thiệp thủ công
- Dừng lại đúng sau câu cuối cùng


### Boolean expressions trong Python

**Comparison operators trả về boolean:**

```python
5 < 10    # True
5 > 10    # False
5 == 5    # True
5 != 3    # True
```

**Có thể dùng trực tiếp trong return:**

```python
def is_adult(age):
    return age >= 18

print(is_adult(20))  # True
print(is_adult(15))  # False
```

**Không cần if-else:**

```python
# ❌ Dài dòng
def is_positive(number):
    if number > 0:
        return True
    else:
        return False

# ✓ Ngắn gọn
def is_positive(number):
    return number > 0
```


### While loop với method call

**Cấu trúc:**

```python
while object.method_that_returns_boolean():
    # Code to execute
```

**Trong quiz:**

```python
while quiz.still_has_questions():  # Method trả về True/False
    quiz.next_question()
```

**Python evaluate:**

1. Gọi `quiz.still_has_questions()`
2. Nhận True hoặc False
3. True → Chạy code trong loop
4. False → Thoát loop

### Vấn đề đã giải quyết

**✓ Quiz chạy liên tục:**
Không còn dừng sau câu 1.

**✓ Tự động:**
Không cần input để sang câu tiếp theo.

**✓ Dừng đúng lúc:**
Kết thúc sau câu cuối, không lỗi index.

**✓ Code sạch:**
Logic rõ ràng, dễ maintain.

### Còn thiếu gì?

**Hiện tại:**
Quiz hỏi câu hỏi nhưng không kiểm tra đáp án.

**Bước tiếp theo:**

- Kiểm tra câu trả lời user có đúng không
- Tính điểm
- Hiển thị feedback (đúng/sai)
- Báo cáo điểm cuối

**Preview (bài sau):**

```python
def check_answer(self, user_answer, correct_answer):
    if user_answer.lower() == correct_answer.lower():
        print("You got it right!")
        self.score += 1
    else:
        print("That's wrong.")
```


### Code hoàn chỉnh - QuizBrain

```python
class QuizBrain:
    
    def __init__(self, q_list):
        self.question_number = 0
        self.question_list = q_list
    
    def still_has_questions(self):
        return self.question_number < len(self.question_list)
    
    def next_question(self):
        current_question = self.question_list[self.question_number]
        self.question_number += 1
        input(f"Q.{self.question_number}: {current_question.text} (True/False): ")
```

**Giải thích từng phần:**

**Constructor:**

- Khởi tạo question_number = 0
- Lưu question_list từ parameter

**still_has_questions():**

- Kiểm tra còn câu hỏi không
- Return boolean expression trực tiếp

**next_question():**

- Lấy câu hỏi hiện tại
- Tăng question_number
- Hiển thị và nhận input


### Best Practices

**✓ Return boolean expressions trực tiếp:**

```python
# Good
return x < y

# Avoid
if x < y:
    return True
else:
    return False
```

**✓ Method names rõ ràng:**

`still_has_questions()` → Rõ ràng trả về boolean

**✓ Single Responsibility:**

Mỗi method làm 1 việc cụ thể:

- `still_has_questions()` → Check điều kiện
- `next_question()` → Hiển thị câu hỏi

**✓ Sử dụng len() function:**

Linh hoạt với list có độ dài bất kỳ.

### Tổng kết

**Đã hoàn thành:**
✓ Tạo method `still_has_questions()`
✓ Return boolean dựa trên comparison
✓ Implement while loop trong main.py
✓ Quiz chạy liên tục qua tất cả câu hỏi
✓ Dừng đúng lúc sau câu cuối

**QuizBrain bây giờ có:**

- Attributes: question_number, question_list
- Method: still_has_questions() - kiểm tra điều kiện
- Method: next_question() - hiển thị câu hỏi

**Học được:**

- Cách tạo method trả về boolean
- Simplify if-else thành return expression
- While loop với method call
- So sánh index với length của list

**Bước tiếp theo:**
Implement logic kiểm tra câu trả lời và tính điểm.

***

**Liên kết:** [[While Loop]], [[Boolean]], [[still_has_questions]], [[Method]], [[Return Statement]], [[Comparison Operators]], [[List Length]], [[Quiz Game]], [[QuizBrain]], [[Loop Control]], [[Python OOP]], [[Boolean Expressions]]

