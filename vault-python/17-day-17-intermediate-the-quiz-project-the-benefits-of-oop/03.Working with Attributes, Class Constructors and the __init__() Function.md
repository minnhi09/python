
## Thêm Attributes vào Class

### Cách 1: Thêm thủ công bằng Dot Notation

**Cú pháp cơ bản:**

```python
class User:
    pass

# Tạo object
user_1 = User()

# Thêm attributes thủ công
user_1.id = "001"
user_1.username = "angela"

# Truy cập attribute
print(user_1.username)  # Output: angela
```

**Nhắc lại:** Attribute là **variable gắn liền với object**, không phải biến độc lập.

### Vấn đề của Phương pháp Thủ công

**Khi tạo nhiều users:**

```python
user_1 = User()
user_1.id = "001"
user_1.username = "angela"

user_2 = User()
user_2.id = "002"
user_2.username = "jack"
```

**Nhược điểm:**

- Dễ gõ nhầm tên attribute (typo)
- Tốn nhiều dòng code
- Dễ quên khởi tạo một số attributes
- Không nhất quán giữa các objects

**Ví dụ lỗi phổ biến:**

```python
user_1.username = "angela"
user_2.usernme = "jack"  # Typo! - Tạo attribute mới thay vì username
```


### Constructor - Giải pháp tốt hơn

**Khái niệm:**

**Constructor** (Hàm khởi tạo) là phần của blueprint cho phép chỉ định những gì xảy ra khi object được xây dựng (constructed).

**Còn gọi là:** Initialization (Khởi tạo) - Thiết lập các giá trị ban đầu cho variables/attributes khi object được tạo.

### Method `__init__()` - Constructor trong Python

**Cú pháp:**

```python
class User:
    def __init__(self):
        # Code khởi tạo attributes
```

**Đặc điểm đặc biệt:**

- Có hai dấu gạch dưới `__` mỗi bên tên `init`
- Python interpreter nhận biết đây là method đặc biệt
- Được gọi **tự động** mỗi khi tạo object mới

**Ví dụ kiểm tra:**

```python
class User:
    def __init__(self):
        print("New user being created...")

user_1 = User()  # Output: New user being created...
```


### Keyword 'self'

**Ý nghĩa:**
`self` đại diện cho **object đang được tạo/khởi tạo**.

**Vai trò:**

- Tham chiếu đến chính object đó
- Cho phép truy cập và thiết lập attributes của object
- Luôn là parameter đầu tiên trong mọi method của class

**Lưu ý quan trọng:**

- Python tự động truyền `self` khi gọi method
- Không cần truyền `self` khi tạo object
- Phải khai báo `self` trong định nghĩa method


### Khởi tạo Attributes với Parameters

**Cú pháp:**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
```

**Giải thích:**

- `user_id`, `username` = Parameters nhận từ bên ngoài
- `self.id` = Attribute của object
- `self.username` = Attribute của object
- Gán giá trị từ parameters vào attributes

**Tạo object với parameters:**

```python
user_1 = User("001", "angela")

print(user_1.id)        # Output: 001
print(user_1.username)  # Output: angela
```

**Flow hoạt động:**

```
User("001", "angela")
    ↓
__init__(self, "001", "angela")
    ↓
self.id = "001"
self.username = "angela"
    ↓
user_1 được tạo với attributes đã khởi tạo
```


### So sánh: Thủ công vs Constructor

**Cách thủ công (3 dòng):**

```python
user_1 = User()
user_1.id = "001"
user_1.username = "angela"
```

**Cách dùng Constructor (1 dòng):**

```python
user_1 = User("001", "angela")
```

**Kết quả:** Hoàn toàn giống nhau, nhưng constructor ngắn gọn và an toàn hơn!

### Tên Parameters vs Tên Attributes

**Quy tắc:**

Tên parameter và tên attribute **có thể khác nhau**:

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id           # Parameter: user_id → Attribute: id
        self.username = username     # Giống nhau
```

**Convention (Quy ước):**
Thường đặt tên parameter = tên attribute để dễ hiểu, nhưng không bắt buộc.

**Ví dụ linh hoạt:**

```python
class User:
    def __init__(self, uid, name):
        self.id = uid
        self.username = name
```


### Required Arguments (Tham số Bắt buộc)

**Khi thêm parameters vào `__init__`:**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
```

**Bắt buộc truyền đủ arguments:**

```python
user_1 = User("001", "angela")  # ✓ Đúng

user_2 = User()  # ✗ LỖI!
# TypeError: __init__() missing 2 required positional arguments: 
# 'user_id' and 'username'
```


### Default Values (Giá trị Mặc định)

**Khi nào dùng default values:**

- Attributes có giá trị khởi đầu cố định
- Không cần truyền từ bên ngoài
- Có thể thay đổi sau này

**Ví dụ thực tế: Instagram User**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0  # Default value
```

**Giải thích:**

- Mọi user mới đều bắt đầu với 0 followers
- Không cần truyền vào khi tạo user
- Có thể thay đổi sau: `user_1.followers = 100`

**Sử dụng:**

```python
user_1 = User("001", "angela")
print(user_1.followers)  # Output: 0

# Thay đổi sau
user_1.followers = 150
print(user_1.followers)  # Output: 150
```


### Ví dụ Hoàn chỉnh

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0
        self.following = 0
    
# Tạo nhiều users dễ dàng
user_1 = User("001", "angela")
user_2 = User("002", "jack")

# Truy cập attributes
print(user_1.username)   # angela
print(user_1.followers)  # 0
print(user_2.id)         # 002
```


### Tổng kết: Ba cách thêm Attributes

**1. Dot notation thủ công:**

```python
user_1 = User()
user_1.id = "001"  # Thêm sau khi tạo object
```

**2. Qua parameters trong `__init__`:**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username

user_1 = User("001", "angela")  # Truyền khi tạo
```

**3. Default values trong `__init__`:**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0  # Giá trị mặc định
```


### Best Practices (Thực hành Tốt)

**Nên:**

- Dùng `__init__` để khởi tạo attributes
- Đặt default values cho attributes có giá trị cố định ban đầu
- Đặt tên parameters rõ ràng, dễ hiểu
- Yêu cầu parameters cho attributes quan trọng

**Tránh:**

- Thêm attributes thủ công sau khi tạo object (trừ trường hợp đặc biệt)
- Quá nhiều parameters trong `__init__` (khó quản lý)
- Tên parameters gây nhầm lẫn


### Constructor trong Thực tế

**Ví dụ: Car class**

```python
class Car:
    def __init__(self, model, year):
        self.model = model
        self.year = year
        self.seats = 5           # Default
        self.odometer = 0        # Default
        self.is_running = False  # Default

# Tạo cars
car1 = Car("Tesla Model 3", 2023)
car2 = Car("Honda Civic", 2022)
```

**Lợi ích:**

- Nhất quán: Mọi car đều có đủ attributes
- An toàn: Không quên khởi tạo
- Rõ ràng: Biết car cần thông tin gì
- Linh hoạt: Default values cho attributes phổ biến

***

**Liên kết:** [[Constructor]], [[__init__]], [[Self]], [[Attributes]], [[Parameters]], [[Default Values]], [[Object Initialization]], [[Class]], [[User Class]], [[Instagram]], [[Required Arguments]], [[Dot Notation]], [[Python OOP]], [[Class Methods]]

