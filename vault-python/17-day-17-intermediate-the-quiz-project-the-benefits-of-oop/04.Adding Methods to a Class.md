
## Thêm Methods vào Class

### Attributes vs Methods

**Nhắc lại:**

- **Attributes** = Những gì object **có** (has)
- **Methods** = Những gì object **làm được** (does)

**Ví dụ:**

- Car object có `seats` attribute (thuộc tính)
- Car object có `enter_race_mode()` method (phương thức)


### Methods là gì?

**Định nghĩa:**
Methods là **functions gắn liền với object**. Khi một function được định nghĩa bên trong class, nó trở thành method.

**Đặc điểm:**

- Được gọi qua object bằng dot notation
- Có thể truy cập và thay đổi attributes của object
- Luôn có parameter `self` đầu tiên


### Cú pháp tạo Method

**Cấu trúc cơ bản:**

```python
class ClassName:
    def method_name(self, parameters):
        # Code của method
```

**Thành phần:**

- `def` - Keyword khai báo function/method
- `method_name` - Tên method (snake_case)
- `self` - Parameter đầu tiên (bắt buộc)
- `parameters` - Các parameters khác (tùy chọn)
- Colon `:` - Kết thúc khai báo
- Indentation - Nội dung method phải thụt vào


### Ví dụ 1: Car Class - Enter Race Mode

**Scenario:** Xe đua cần giảm ghế để giảm trọng lượng và tăng tốc độ.

**Code:**

```python
class Car:
    def __init__(self):
        self.seats = 5  # Xe thường có 5 ghế
    
    def enter_race_mode(self):
        self.seats = 2  # Giảm xuống 2 ghế khi vào chế độ đua
```

**Giải thích:**

- `enter_race_mode()` là method không cần parameters ngoài `self`
- Thay đổi attribute `seats` từ 5 → 2
- `self.seats` = Truy cập attribute của chính object đó

**Sử dụng:**

```python
my_car = Car()
print(my_car.seats)  # Output: 5

my_car.enter_race_mode()  # Gọi method
print(my_car.seats)  # Output: 2
```

**Cú pháp gọi method:**

```python
object_name.method_name()
```


### Keyword 'self' trong Methods

**Vai trò:**

- `self` đại diện cho **object đang gọi method**
- Cho phép method biết nó đang làm việc với object nào
- Bắt buộc phải có làm parameter đầu tiên

**Lưu ý quan trọng:**

- Khi **định nghĩa** method: Phải có `self` trong parameters
- Khi **gọi** method: Không cần truyền `self` (Python tự động xử lý)

**Ví dụ minh họa:**

```python
class User:
    def __init__(self, name):
        self.name = name
    
    def greet(self):
        print(f"Hello, I'm {self.name}")

user1 = User("Angela")
user1.greet()  # Không truyền self
# Python tự động: User.greet(user1)
# Output: Hello, I'm Angela
```


### Ví dụ 2: Instagram User - Follow Method

**Scenario:** Modeling chức năng follow giữa các users trên Instagram.

**Requirements:**

- User có thể follow user khác
- Khi follow: follower count của người được follow tăng lên
- Khi follow: following count của người follow tăng lên

**Code hoàn chỉnh:**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0   # Default value
        self.following = 0   # Default value
    
    def follow(self, user):
        # user được follow → followers tăng
        user.followers += 1
        
        # self (người follow) → following tăng
        self.following += 1
```

**Giải thích chi tiết:**

```python
def follow(self, user):
```

- `self` = User đang thực hiện hành động follow
- `user` = User đang được follow (parameter)

```python
user.followers += 1
```

- Tăng follower count của user được follow

```python
self.following += 1
```

- Tăng following count của chính mình


### Sử dụng Follow Method

**Tạo users và test:**

```python
# Tạo 2 users
user_1 = User("001", "angela")
user_2 = User("002", "jack")

# user_1 follow user_2
user_1.follow(user_2)

# Kiểm tra kết quả
print(f"User 1 - Followers: {user_1.followers}")   # 0
print(f"User 1 - Following: {user_1.following}")   # 1

print(f"User 2 - Followers: {user_2.followers}")   # 1
print(f"User 2 - Following: {user_2.following}")   # 0
```

**Phân tích kết quả:**


| User | Followers | Following | Giải thích |
| :-- | :-- | :-- | :-- |
| user_1 (angela) | 0 | 1 | Không ai follow, đang follow 1 người |
| user_2 (jack) | 1 | 0 | Có 1 follower, không follow ai |

### Flow hoạt động của Method

**Khi gọi:** `user_1.follow(user_2)`

```
1. Python tự động truyền user_1 làm 'self'
   ↓
2. Method nhận: self=user_1, user=user_2
   ↓
3. Thực hiện: user_2.followers += 1
   ↓
4. Thực hiện: user_1.following += 1
   ↓
5. Hoàn tất
```


### Methods với nhiều Parameters

**Ví dụ: Send Message method**

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0
        self.following = 0
    
    def follow(self, user):
        user.followers += 1
        self.following += 1
    
    def send_message(self, user, message):
        print(f"{self.username} → {user.username}: {message}")
```

**Sử dụng:**

```python
user_1 = User("001", "angela")
user_2 = User("002", "jack")

user_1.send_message(user_2, "Hello Jack!")
# Output: angela → jack: Hello Jack!
```

**Parameters breakdown:**

- `self` = user_1 (tự động)
- `user` = user_2 (truyền vào)
- `message` = "Hello Jack!" (truyền vào)


### Self - Khi nào thấy, khi nào không

**Thấy 'self' trong:**

```python
# Trong class definition
class User:
    def __init__(self, username):
        self.username = username  # ✓ Thấy self
    
    def greet(self):
        print(self.username)      # ✓ Thấy self
```

**Không thấy 'self' khi:**

```python
# Khi sử dụng objects
user1 = User("angela")    # ✗ Không thấy self
user1.greet()             # ✗ Không thấy self
```

**Nguyên tắc vàng:**

- **Viết code trong class** → Dùng `self`
- **Sử dụng objects** → Không dùng `self`


### Code User Class đầy đủ

```python
class User:
    def __init__(self, user_id, username):
        self.id = user_id
        self.username = username
        self.followers = 0
        self.following = 0
    
    def follow(self, user):
        user.followers += 1
        self.following += 1
    
    def get_info(self):
        return f"@{self.username} | Followers: {self.followers} | Following: {self.following}"

# Tạo users
user_1 = User("001", "angela")
user_2 = User("002", "jack")
user_3 = User("003", "mike")

# Interactions
user_1.follow(user_2)
user_1.follow(user_3)
user_3.follow(user_2)

# Display info
print(user_1.get_info())  # @angela | Followers: 0 | Following: 2
print(user_2.get_info())  # @jack | Followers: 2 | Following: 0
print(user_3.get_info())  # @mike | Followers: 1 | Following: 1
```


### Tổng kết: Attributes vs Methods

**Attributes (Thuộc tính):**

- Là variables của object
- Lưu trữ data/state
- Truy cập: `object.attribute`
- Ví dụ: `user.followers`, `car.seats`

**Methods (Phương thức):**

- Là functions của object
- Thực hiện hành động
- Gọi: `object.method(parameters)`
- Ví dụ: `user.follow()`, `car.enter_race_mode()`


### Best Practices

**Methods nên:**

- Có tên động từ rõ ràng (follow, send, calculate, update)
- Làm một việc cụ thể
- Tương tác với attributes của object

**Tránh:**

- Methods quá dài, phức tạp
- Tên methods không rõ nghĩa
- Quên parameter `self`


### Ứng dụng trong thực tế

**Social Media App:**

- `follow()`, `unfollow()`, `post()`, `like()`, `comment()`

**E-commerce:**

- `add_to_cart()`, `checkout()`, `calculate_total()`, `apply_discount()`

**Game:**

- `move()`, `attack()`, `defend()`, `collect_item()`, `level_up()`

***

**Liên kết:** [[Methods]], [[Self]], [[Class]], [[Object]], [[Attributes]], [[Functions]], [[User Class]], [[Car Class]], [[Instagram]], [[Follow]], [[Parameters]], [[Dot Notation]], [[Python OOP]], [[Object Methods]], [[Instance Methods]]

