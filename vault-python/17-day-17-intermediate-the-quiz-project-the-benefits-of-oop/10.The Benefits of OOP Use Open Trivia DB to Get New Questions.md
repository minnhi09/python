

## Quiz Game - Sử dụng Open Trivia Database API

### Vấn đề với Data hiện tại

**Hạn chế:**

- Chỉ có 1 question bank cố định
- User nhanh nhớ hết câu hỏi và đáp án
- Thiếu tính đa dạng

**Giải pháp:**

- Tự viết câu hỏi mới (thủ công)
- Sử dụng **Open Trivia Database** (tự động)


### Open Trivia Database (Open TDB)

**Giới thiệu:**

- Free-to-use trivia question database
- User-contributed (đóng góp bởi cộng đồng)
- Hơn 3000+ câu hỏi đã được verify
- Cung cấp API để lấy data

**Link:** opentdb.com (có trong course resources)

### Sử dụng Open TDB API

**Truy cập API Generator:**

1. Vào website Open Trivia Database
2. Chọn API settings
3. Tùy chỉnh theo nhu cầu

**Tùy chọn có sẵn:**

**Number of Questions:**

- Chọn số lượng câu hỏi muốn lấy (ví dụ: 10)

**Category:**

- Computers, Science, Sports, History, Geography...
- Hoặc Any Category

**Difficulty:**

- Easy, Medium, Hard
- Hoặc Any Difficulty

**Type:**

- Multiple Choice
- **True / False** (chọn cho quiz của chúng ta)

**Ví dụ configuration:**

- 10 questions
- Category: Computers
- Difficulty: Easy
- Type: True / False

**Generate URL:**
Click nút "Generate API URL" để nhận link.

### API Response - JSON Format

**Ví dụ URL:**

```
https://opentdb.com/api.php?amount=10&category=18&difficulty=easy&type=boolean
```

**Mở URL trong browser:**
Nhận data dạng JSON (JavaScript Object Notation)

**Đặc điểm JSON:**

- Giống Python dictionaries
- Key-value pairs
- Nested structures

**Cấu trúc Response:**

```python
{
    "response_code": 0,
    "results": [
        {
            "category": "Science: Computers",
            "type": "boolean",
            "difficulty": "easy",
            "question": "The programming language &quot;Python&quot; is based off a modified version of &quot;JavaScript&quot;.",
            "correct_answer": "False",
            "incorrect_answers": ["True"]
        },
        # ... 9 more questions
    ]
}
```

**Phân tích:**

- Top level: Dictionary với 2 keys
    - `response_code` = 0 (success)
    - `results` = List of dictionaries
- Mỗi dictionary trong `results` = 1 câu hỏi


### Sử dụng Data trong Project

**Bước 1: Copy JSON data**

- Copy toàn bộ JSON từ browser
- Paste vào file `data.py`

**Bước 2: Reformat code**

**Vấn đề:** Code sau khi paste rất khó đọc (tất cả trên 1 dòng)

**Giải pháp:**

- Code → Reformat Code (trong PyCharm)
- Hoặc: Ctrl+Alt+L (Windows) / Cmd+Option+L (Mac)

**Kết quả:** Code được format đẹp, dễ đọc

**Bước 3: Trích xuất results list**

**JSON structure ban đầu:**

```python
{
    "response_code": 0,
    "results": [
        {...},
        {...}
    ]
}
```

**Chỉ cần list inside results:**

```python
question_data = [
    {
        "category": "Science: Computers",
        "type": "boolean",
        "difficulty": "easy",
        "question": "Question text here",
        "correct_answer": "False",
        "incorrect_answers": ["True"]
    },
    # ... more questions
]
```

**Action:** Xóa outer dictionary, chỉ giữ list.

### Cấu trúc mỗi Question Dictionary

**5 Key-value pairs:**

```python
{
    "category": "Science: Computers",        # Chủ đề
    "type": "boolean",                        # Loại câu hỏi
    "difficulty": "easy",                     # Độ khó
    "question": "Question text",              # NỘI DUNG CÂU HỎI
    "correct_answer": "True",                 # ĐÁP ÁN ĐÚNG
    "incorrect_answers": ["False"]            # Đáp án sai
}
```

**Keys quan trọng:**

- `"question"` - Thay cho `"text"` cũ
- `"correct_answer"` - Thay cho `"answer"` cũ


### Cập nhật main.py

**Code cũ:**

```python
for question in question_data:
    question_text = question["text"]
    question_answer = question["answer"]
    new_question = Question(question_text, question_answer)
    question_bank.append(new_question)
```

**Code mới:**

```python
for question in question_data:
    question_text = question["question"]
    question_answer = question["correct_answer"]
    new_question = Question(question_text, question_answer)
    question_bank.append(new_question)
```

**Thay đổi:**

- `"text"` → `"question"`
- `"answer"` → `"correct_answer"`

**Chỉ 2 dòng thay đổi!** Phần còn lại không động gì.

### Test với Data mới

**Chạy main.py:**

```
Q.1: The programming language "Python" is based off a modified version of "JavaScript". (True/False): False
You got it right!
The correct answer was: False.
Your current score is: 1/1

Q.2: [Next computer question]...
```

**Kết quả:**

- Quiz hoạt động hoàn hảo với data mới
- Câu hỏi về Computers
- Độ khó Easy
- Tất cả True/False


### Thử nghiệm với Categories khác

**Thay đổi category:**

1. Quay lại Open TDB API
2. Chọn category khác (ví dụ: Geography)
3. Generate URL mới
4. Copy JSON mới
5. Replace trong data.py
6. Chỉ cần update keys nếu format khác

**Flexibility:**

- Đổi chủ đề: Science → Sports → History
- Đổi độ khó: Easy → Medium → Hard
- Đổi ngôn ngữ (nếu có support)
- Vô tận câu hỏi để thử


### Modularity của OOP - Lợi ích lớn

**Quan sát quan trọng:**

**Files không cần sửa:**

- ✗ `question_model.py` - Không đổi
- ✗ `quiz_brain.py` - Không đổi

**Files cần sửa:**

- ✓ `data.py` - Thay data mới
- ✓ `main.py` - Chỉ 2 dòng (key names)

**QuizBrain không quan tâm:**

- Data đến từ đâu
- Data có format như thế nào
- Chủ đề gì, ngôn ngữ gì

**QuizBrain chỉ quan tâm:**

- Track câu hỏi hiện tại
- Lấy câu hỏi tiếp theo
- Kiểm tra đáp án
- Thực hiện chức năng quiz

**Separation of Concerns (Tách biệt trách nhiệm):**

- QuizBrain = Logic quản lý quiz
- Data.py = Cung cấp data
- Main.py = Kết nối mọi thứ


### So sánh với Procedural Programming

**Procedural approach:**

- Thay đổi data → Phải sửa nhiều functions
- Hard-coded data format
- Khó mở rộng
- Tight coupling giữa data và logic

**OOP approach:**

- Thay đổi data → Minimal changes
- Flexible data format
- Dễ mở rộng
- Loose coupling - modules độc lập

**Ưu thế OOP:**
Có thể tạo chương trình phức tạp hơn nhiều so với procedural code đơn giản.

### Collaboration với Team

**Scenario:**

**Colleague A làm việc trên QuizBrain:**

- Không cần biết data format
- Không cần biết data source
- Focus vào quiz logic
- Code của họ hoạt động với bất kỳ data nào

**Bạn làm việc trên Data:**

- Thay đổi source (API, file, database)
- Thay đổi format
- Thêm/bớt fields
- QuizBrain vẫn hoạt động

**Result:**
Làm việc song song, không conflict, productivity cao.

### API Basics - Giới thiệu

**API (Application Programming Interface):**

- Cách để programs giao tiếp với nhau
- URL endpoint trả về data
- Data thường ở format JSON
- Có thể customize với parameters

**Open TDB API Parameters:**

**URL Structure:**

```
https://opentdb.com/api.php?amount=10&category=18&difficulty=easy&type=boolean
```

**Parameters:**

- `amount=10` - Số câu hỏi
- `category=18` - Category ID
- `difficulty=easy` - Độ khó
- `type=boolean` - Loại câu hỏi

**Kết quả:** Server trả về JSON data theo yêu cầu.

### JSON vs Python Dictionary

**Similarities (Giống nhau):**

- Cả hai dùng `{}` cho objects/dictionaries
- Cả hai có key-value pairs
- Cả hai có nested structures
- Cả hai có lists/arrays

**Differences (Khác nhau):**


| JSON | Python |
| :-- | :-- |
| `true`, `false` | `True`, `False` |
| `null` | `None` |
| String keys phải có `""` | String keys có thể dùng `''` hoặc `""` |

**Python có thể parse JSON dễ dàng:**

```python
import json

json_string = '{"key": "value"}'
python_dict = json.loads(json_string)
```


### Mở rộng trong tương lai

**Có thể làm:**

- Fetch data trực tiếp từ API trong code (không paste thủ công)
- Cache questions locally
- Mix questions từ nhiều categories
- Thêm timer cho mỗi câu
- Leaderboard system
- Multiple choice questions (không chỉ True/False)

**Skills cần học thêm:**

- HTTP requests (module `requests`)
- JSON parsing (module `json`)
- Error handling cho API calls
- Data persistence


### Best Practices

**✓ Separation of Concerns:**
Tách logic khỏi data.

**✓ Flexible Design:**
Code nên hoạt động với nhiều data formats.

**✓ Modularity:**
Thay đổi một phần không ảnh hưởng phần khác.

**✓ Documentation:**
Comment rõ data structure expected.

**✓ Error Handling:**
Xử lý trường hợp data không đúng format.

### Tổng kết

**Đã học:**
✓ Open Trivia Database API
✓ Cách generate và sử dụng API URL
✓ JSON format và structure
✓ Cập nhật data source mới
✓ Minimal code changes cần thiết
✓ Modularity và separation trong OOP
✓ Team collaboration benefits

**Key Insight:**
OOP cho phép thay đổi data hoàn toàn mà không cần sửa business logic. QuizBrain class hoạt động độc lập với data source.

**Power of OOP:**
Xây dựng programs phức tạp với components độc lập, dễ maintain, dễ mở rộng, dễ collaborate.

**Quiz Game hoàn chỉnh:**

- Functional
- Flexible (đổi data dễ dàng)
- Modular (components tách biệt)
- Extensible (dễ thêm features)
- Professional structure

***

**Liên kết:** [[Open Trivia Database]], [[API]], [[JSON]], [[Data Format]], [[Modularity]], [[Separation of Concerns]], [[OOP Benefits]], [[Quiz Game]], [[QuizBrain]], [[Data Source]], [[Flexibility]], [[Team Collaboration]], [[Python Dictionary]], [[HTTP]], [[Web API]]

