

## Gi·∫£i Ph√°p Blackjack - Ph·∫ßn 5: Ho√†n Thi·ªán Game

### B∆∞·ªõc 13: T·∫°o H√†m compare()

**M·ª•c ti√™u:** So s√°nh ƒëi·ªÉm cu·ªëi c√πng gi·ªØa user v√† computer ƒë·ªÉ x√°c ƒë·ªãnh ng∆∞·ªùi th·∫Øng.

```python
def compare(u_score, c_score):
    """Compares the user score u_score against the computer score c_score."""
    if u_score == c_score:
        return "Draw üôÉ"
    elif c_score == 0:
        return "Lose, opponent has Blackjack üò±"
    elif u_score == 0:
        return "Win with a Blackjack üòé"
    elif u_score > 21:
        return "You went over. You lose üò≠"
    elif c_score > 21:
        return "Opponent went over. You win üòÅ"
    elif u_score > c_score:
        return "You win üòÉ"
    else:
        return "You lose üò§"
```

**Th·ª© t·ª± ki·ªÉm tra ƒëi·ªÅu ki·ªán:**

- H√≤a: `u_score == c_score`
- Computer Blackjack: `c_score == 0`
- User Blackjack: `u_score == 0`
- User Bust: `u_score > 21`
- Computer Bust: `c_score > 21`
- So s√°nh ƒëi·ªÉm: `u_score > c_score`
- Tr∆∞·ªùng h·ª£p c√≤n l·∫°i: User thua

**Nguy√™n t·∫Øc quan tr·ªçng:**

- C√°c ƒëi·ªÅu ki·ªán ƒë∆∞·ª£c ki·ªÉm tra t·ª´ tr√™n xu·ªëng d∆∞·ªõi
- Khi m·ªôt ƒëi·ªÅu ki·ªán ƒë√∫ng ‚Üí return ngay ‚Üí tho√°t function
- Kh√¥ng ƒë·∫øn c√°c ƒëi·ªÅu ki·ªán ph√≠a sau
- Th·ª© t·ª± logic r·∫•t quan tr·ªçng

**V√≠ d·ª• minh h·ªça:**

```python
# Tr∆∞·ªùng h·ª£p Computer Blackjack
u_score = 20
c_score = 0  # Blackjack

# Ki·ªÉm tra: u_score == c_score? ‚Üí Kh√¥ng (20 != 0)
# Ki·ªÉm tra: c_score == 0? ‚Üí C√≥ ‚Üí return "Lose, opponent has Blackjack"
# Kh√¥ng ƒë·∫øn ƒëi·ªÅu ki·ªán u_score > c_score (20 > 0)
```


### X·ª≠ L√Ω L·ªói: Variable Shadowing

**C·∫£nh b√°o:** "Shadows name from outer scope"

**Nguy√™n nh√¢n:**

```python
# Bi·∫øn ·ªü outer scope
user_score = 15
computer_score = 18

# Tham s·ªë function c√πng t√™n
def compare(user_score, computer_score):  # Shadow warning!
    # ...
```

**V·∫•n ƒë·ªÅ:**

- T√™n bi·∫øn trong function tr√πng v·ªõi t√™n bi·∫øn b√™n ngo√†i
- G√¢y nh·∫ßm l·∫´n v·ªÅ scope (ph·∫°m vi)
- Kh√≥ debug v√† maintain code

**Gi·∫£i ph√°p: ƒê·ªïi t√™n tham s·ªë**

```python
def compare(u_score, c_score):
    # u_score v√† c_score l√† t√™n kh√°c, tr√°nh shadowing
```

**C√¥ng c·ª• Refactor trong IDE:**

- Right-click ‚Üí Refactor ‚Üí Rename
- Ho·∫∑c click v√†o warning ‚Üí Rename
- T·ª± ƒë·ªông ƒë·ªïi t√™n t·∫•t c·∫£ n∆°i s·ª≠ d·ª•ng
- Kh√¥ng ·∫£nh h∆∞·ªüng bi·∫øn kh√°c


### B∆∞·ªõc 14: Hi·ªÉn Th·ªã K·∫øt Qu·∫£ Cu·ªëi C√πng

**G·ªçi h√†m compare() v√† hi·ªÉn th·ªã th√¥ng tin:**

```python
# Hi·ªÉn th·ªã b√†i cu·ªëi c√πng
print(f"Your final hand: {user_cards}, final score: {user_score}")
print(f"Computer's final hand: {computer_cards}, final score: {computer_score}")

# So s√°nh v√† c√¥ng b·ªë k·∫øt qu·∫£
print(compare(user_score, computer_score))
```

**Output m·∫´u:**

```
Your final hand: [3, 10, 6], final score: 19
Computer's final hand: [7, 8, 5], final score: 20
You lose üò§
```

**∆Øu ƒëi·ªÉm c·ªßa c√°ch hi·ªÉn th·ªã:**

- L·∫≠t t·∫•t c·∫£ b√†i c·ªßa computer
- Hi·ªÉn th·ªã ƒëi·ªÉm r√µ r√†ng
- Th√¥ng b√°o k·∫øt qu·∫£ v·ªõi emoji sinh ƒë·ªông
- User hi·ªÉu ƒë∆∞·ª£c t·∫°i sao th·∫Øng/thua


### B∆∞·ªõc 15: T·∫°o V√≤ng L·∫∑p Ch∆°i L·∫°i

**M·ª•c ti√™u:** Cho ph√©p ch∆°i nhi·ªÅu v√°n li√™n ti·∫øp.

**B∆∞·ªõc 1 - ƒê√≥ng g√≥i code v√†o function:**

```python
def play_game():
    # T·∫•t c·∫£ code t·ª´ kh·ªüi t·∫°o ƒë·∫øn compare
    user_cards = []
    computer_cards = []
    # ... (to√†n b·ªô logic game)
    print(compare(user_score, computer_score))
```

**B∆∞·ªõc 2 - T·∫°o v√≤ng l·∫∑p ch∆°i l·∫°i:**

```python
while input("Do you want to play a game of Blackjack? Type 'y' or 'n': ") == "y":
    print("\n" * 20)  # Clear console
    play_game()
```

**Gi·∫£i th√≠ch logic:**

- `input()` tr·∫£ v·ªÅ chu·ªói ng∆∞·ªùi d√πng nh·∫≠p
- So s√°nh v·ªõi "y"
- N·∫øu ƒë√∫ng ‚Üí ch·∫°y `play_game()`
- Sau m·ªói game ‚Üí h·ªèi l·∫°i
- Nh·∫≠p "n" ‚Üí tho√°t while loop

**Clear console:**

```python
print("\n" * 20)
```

- `\n`: K√Ω t·ª± xu·ªëng d√≤ng (newline)
- Nh√¢n 20 l·∫ßn ‚Üí 20 d√≤ng tr·ªëng
- ƒê·∫©y n·ªôi dung c≈© l√™n tr√™n, t·∫°o c·∫£m gi√°c "x√≥a m√†n h√¨nh"


### B∆∞·ªõc 16: Th√™m Logo

**Import logo t·ª´ file art.py:**

```python
from art import logo

def play_game():
    print(logo)
    # ... rest of game code
```

**L√Ω do ƒë·∫∑t logo trong function:**

- Hi·ªÉn th·ªã m·ªói khi b·∫Øt ƒë·∫ßu game m·ªõi
- T·∫°o tr·∫£i nghi·ªám chuy√™n nghi·ªáp
- Ph√¢n t√°ch r√µ c√°c v√°n ch∆°i


### Code Ho√†n Ch·ªânh Cu·ªëi C√πng

```python
import random
from art import logo

def deal_card():
    """Returns a random card from the deck."""
    cards = [11, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]
    return random.choice(cards)

def calculate_score(cards):
    """Take a list of cards and return the score calculated from the cards"""
    if sum(cards) == 21 and len(cards) == 2:
        return 0
    if 11 in cards and sum(cards) > 21:
        cards.remove(11)
        cards.append(1)
    return sum(cards)

def compare(u_score, c_score):
    """Compares the user score u_score against the computer score c_score."""
    if u_score == c_score:
        return "Draw üôÉ"
    elif c_score == 0:
        return "Lose, opponent has Blackjack üò±"
    elif u_score == 0:
        return "Win with a Blackjack üòé"
    elif u_score > 21:
        return "You went over. You lose üò≠"
    elif c_score > 21:
        return "Opponent went over. You win üòÅ"
    elif u_score > c_score:
        return "You win üòÉ"
    else:
        return "You lose üò§"

def play_game():
    print(logo)
    
    user_cards = []
    computer_cards = []
    is_game_over = False
    
    # Chia 2 l√° ban ƒë·∫ßu
    for _ in range(2):
        user_cards.append(deal_card())
        computer_cards.append(deal_card())
    
    # L∆∞·ª£t ch∆°i c·ªßa user
    while not is_game_over:
        user_score = calculate_score(user_cards)
        computer_score = calculate_score(computer_cards)
        
        print(f"Your cards: {user_cards}, current score: {user_score}")
        print(f"Computer's first card: {computer_cards[0]}")
        
        if user_score == 0 or computer_score == 0 or user_score > 21:
            is_game_over = True
        else:
            user_should_deal = input("Type 'y' to get another card, type 'n' to pass: ")
            if user_should_deal == 'y':
                user_cards.append(deal_card())
            else:
                is_game_over = True
    
    # L∆∞·ª£t ch∆°i c·ªßa computer
    while computer_score != 0 and computer_score < 17:
        computer_cards.append(deal_card())
        computer_score = calculate_score(computer_cards)
    
    # Hi·ªÉn th·ªã k·∫øt qu·∫£
    print(f"Your final hand: {user_cards}, final score: {user_score}")
    print(f"Computer's final hand: {computer_cards}, final score: {computer_score}")
    print(compare(user_score, computer_score))

# Main game loop
while input("Do you want to play a game of Blackjack? Type 'y' or 'n': ") == "y":
    print("\n" * 20)
    play_game()
```


### C·∫•u Tr√∫c T·ªïng Th·ªÉ c·ªßa Project

**Ph√¢n t√≠ch c√°c th√†nh ph·∫ßn:**

**Functions (3 functions):**

- `deal_card()`: R√∫t b√†i ng·∫´u nhi√™n
- `calculate_score()`: T√≠nh ƒëi·ªÉm v√† x·ª≠ l√Ω Ace
- `compare()`: So s√°nh ƒëi·ªÉm v√† x√°c ƒë·ªãnh ng∆∞·ªùi th·∫Øng
- `play_game()`: ƒêi·ªÅu ph·ªëi to√†n b·ªô game

**Main Loop:**

- H·ªèi user c√≥ mu·ªën ch∆°i kh√¥ng
- Clear console
- G·ªçi `play_game()`
- L·∫∑p l·∫°i


### L·ªùi Khuy√™n √în T·∫≠p

Sau khi ho√†n th√†nh project, h√£y:

**Review c√°c kh√°i ni·ªám ƒë√£ d√πng:**

- Functions v√† return values
- While loops v√† for loops
- If/elif/else statements
- Lists v√† list methods (append, remove)
- Variable scope
- Boolean flags
- String formatting (f-strings)
- Import modules

**N·∫øu g·∫∑p kh√≥ khƒÉn:**

- Ngh·ªâ ng∆°i v√† quay l·∫°i sau
- √în l·∫°i c√°c b√†i h·ªçc c∆° b·∫£n
- Th·ª≠ debug t·ª´ng ph·∫ßn nh·ªè
- So s√°nh code v·ªõi solution

**ƒêi·ªÉm m·∫°nh c·ªßa project n√†y:**

- T√≠ch h·ª£p nhi·ªÅu concepts Python
- Th·ª±c h√†nh logic ph·ª©c t·∫°p
- Game th·ª±c t·∫ø, c√≥ th·ªÉ ch∆°i ƒë∆∞·ª£c
- N·ªÅn t·∫£ng v·ªØng cho c√°c project ti·∫øp theo


### Best Practices ƒê√£ √Åp D·ª•ng

**Code Organization:**

- Functions ·ªü ƒë·∫ßu file
- Main logic ·ªü cu·ªëi
- Clear separation of concerns

**Naming Conventions:**

- Descriptive variable names
- Snake_case cho functions v√† variables
- Avoid shadowing

**Documentation:**

- Docstrings cho m·ªói function
- Comments khi c·∫ßn thi·∫øt
- Clear structure

**Error Prevention:**

- Initialize variables before use
- Check conditions in correct order
- Handle edge cases (Blackjack, Bust)

**User Experience:**

- Clear prompts
- Visual feedback (logo, emojis)
- Clean console between games
- Reveal all cards at end


### Ghi Ch√∫ Th√™m

**V·ªÅ vi·ªác ho√†n th√†nh project:**

- ƒê√¢y l√† project kh√≥ nh·∫•t cho ƒë·∫øn th·ªùi ƒëi·ªÉm n√†y
- Kh√¥ng sao n·∫øu ch∆∞a ho√†n th√†nh ngay
- Ki√™n tr√¨ v√† quay l·∫°i l√† ch√¨a kh√≥a
- M·ªói l·∫ßn th·ª≠ l·∫°i s·∫Ω hi·ªÉu s√¢u h∆°n

**File solution.py:**

- C√≥ s·∫µn ƒë·ªÉ tham kh·∫£o
- So s√°nh v·ªõi code c·ªßa b·∫°n
- H·ªçc t·ª´ c√°ch vi·∫øt kh√°c

**Li√™n k·∫øt:** [[compare function]], [[play_game]], [[Refactoring]], [[Variable Shadowing]], [[Game Loop]], [[Clear Console]], [[User Input]], [[Main Loop]], [[Code Organization]], [[Best Practices]], [[Blackjack Complete]], [[Python Functions]], [[Project Structure]], [[if-elif-else]], [[return statement]]

